{% extends 'base.html' %}

{% block title %}Inicio - TaskFlow{% endblock %}

{% block content %}
    <h1>Gestión de Tareas</h1>

    <form method="GET" action="{{ url_for('index') }}" class="mb-4">
        <input type="text" name="search" placeholder="Buscar tareas..." value="{{ request.args.get('search', '') }}">
        <button type="submit">Buscar</button>
    </form>

    <form action="{{ url_for('add_task') }}" method="POST">
        <input type="text" name="title" placeholder="Título" required>
        <textarea name="description" placeholder="Descripción"></textarea>
        <select name="priority">
            <option value="Alta">Alta</option>
            <option value="Media">Media</option>
            <option value="Baja">Baja</option>
        </select>
        <button type="submit">Agregar</button>
    </form>

    <div class="task-list">
        {% for task in tasks %}
            <div class="task-card">
                <h3>{{ task.title }}</h3>
                <p>{{ task.description }}</p>
                <p><strong>Prioridad:</strong> {{ task.priority }}</p>
                <p><em>Creado: {{ task.created_at }}</em></p>
                <a href="{{ url_for('edit_task', id=task.id) }}">Editar</a>
                <a href="{{ url_for('delete_task', id=task.id) }}" onclick="return confirm('¿Estás seguro?')">Eliminar</a>
            </div>
        {% endfor %}
    </div>
{% endblock %}
